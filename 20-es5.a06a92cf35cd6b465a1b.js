(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{mzvh:function(l,n,e){"use strict";e.r(n);var u=e("8Y7J");class t{}var i=e("pMnS"),o=e("MKJQ"),a=e("sZkV"),s=e("s7LF"),d=e("SVse"),b=e("mrSG"),c=e("SMdV");class r{constructor(l,n,e){this.activatedRoute=l,this.navController=n,this.alertController=e,this.discount=new c.a,this.isCreatingNewDiscount=!1,this.discountTypeList=[],this.discountStatusList=[]}ngOnInit(){}ionViewDidEnter(){const l=this.activatedRoute.snapshot.paramMap.get("id");console.log(l),"new"===l?(this.isCreatingNewDiscount=!0,this.discount.name="New Discount"):this.fetchDiscount(l),Object.values(c.a.Type).forEach(l=>{this.discountTypeList.push(l)}),Object.values(c.a.Status).forEach(l=>{this.discountStatusList.push(l)})}fetchDiscount(l){return b.a(this,void 0,void 0,(function*(){const n=yield fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/discount",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify([l])});this.discount=(yield n.json())[0]}))}save(){return b.a(this,void 0,void 0,(function*(){if(this.discount.name&&"null"!==this.discount.name&&this.discount.value>0)if(this.isCreatingNewDiscount)if((yield fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/discount/add?name="+this.discount.name+"&type="+this.discount.type+"&value="+this.discount.value+"&status="+this.discount.status,{method:"POST",credentials:"include"})).ok)this.navController.navigateBack("/discount");else{const l=yield this.alertController.create({header:"Fail to Create Discount",message:"Fail to create the Discount, please try again."});yield l.present()}else if((yield fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/discount/modify?id="+this.discount.id+"&name="+this.discount.name,{method:"PUT",credentials:"include"})).ok)this.navController.navigateBack("/discount");else{const l=yield this.alertController.create({header:"Fail to Save Discount",message:"Fail to save the discount, please try again."});yield l.present()}else{const l=yield this.alertController.create({header:"Invalid Values",message:"There are one or more invalid values, please check and try again."});yield l.present()}}))}toggleAvailability(){return b.a(this,void 0,void 0,(function*(){if((yield fetch(localStorage.getItem("serverApiBaseUrl")+"/bill/discount/toggle-availability?id="+this.discount.id,{method:"PUT",credentials:"include"})).ok)this.navController.navigateBack("/discount");else{const l=yield this.alertController.create({header:"Fail to Toggle Availability",message:"Fail to toggle availability of the discount, please try again."});yield l.present()}}))}}var g=e("iInd"),h=u.nb({encapsulation:0,styles:[[""]],data:{}});function p(l){return u.Kb(0,[(l()(),u.pb(0,0,null,null,2,"ion-select-option",[],null,null,null,o.gb,o.A)),u.ob(1,49152,null,0,a.kb,[u.h,u.k,u.x],{value:[0,"value"]},null),(l()(),u.Ib(2,0,["",""]))],(function(l,n){l(n,1,0,u.tb(1,"",n.context.$implicit,""))}),(function(l,n){l(n,2,0,n.context.$implicit)}))}function f(l){return u.Kb(0,[(l()(),u.pb(0,0,null,null,2,"ion-select-option",[],null,null,null,o.gb,o.A)),u.ob(1,49152,null,0,a.kb,[u.h,u.k,u.x],{value:[0,"value"]},null),(l()(),u.Ib(2,0,["",""]))],(function(l,n){l(n,1,0,u.tb(1,"",n.context.$implicit,""))}),(function(l,n){l(n,2,0,n.context.$implicit)}))}function v(l){return u.Kb(0,[(l()(),u.pb(0,0,null,null,2,"ion-button",[["color","warning"],["expand","block"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.toggleAvailability()&&u),u}),o.K,o.d)),u.ob(1,49152,null,0,a.j,[u.h,u.k,u.x],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),u.Ib(-1,0,["Toggle Availability"]))],(function(l,n){l(n,1,0,"warning","block")}),null)}function C(l){return u.Kb(0,[(l()(),u.pb(0,0,null,null,2,"ion-button",[["color","danger"],["disabled","true"],["expand","block"]],null,null,null,o.K,o.d)),u.ob(1,49152,null,0,a.j,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(l()(),u.Ib(-1,0,["Delete"]))],(function(l,n){l(n,1,0,"danger","true","block")}),null)}function m(l){return u.Kb(0,[(l()(),u.pb(0,0,null,null,11,"ion-header",[],null,null,null,o.S,o.l)),u.ob(1,49152,null,0,a.A,[u.h,u.k,u.x],null,null),(l()(),u.pb(2,0,null,0,9,"ion-toolbar",[],null,null,null,o.nb,o.G)),u.ob(3,49152,null,0,a.yb,[u.h,u.k,u.x],null,null),(l()(),u.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,o.L,o.e)),u.ob(5,49152,null,0,a.k,[u.h,u.k,u.x],null,null),(l()(),u.pb(6,0,null,0,2,"ion-back-button",[["defaultHref","/discount"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Bb(l,8).onClick(e)&&t),t}),o.I,o.b)),u.ob(7,49152,null,0,a.f,[u.h,u.k,u.x],{defaultHref:[0,"defaultHref"]},null),u.ob(8,16384,null,0,a.g,[[2,a.eb],a.Db],{defaultHref:[0,"defaultHref"]},null),(l()(),u.pb(9,0,null,0,2,"ion-title",[],null,null,null,o.mb,o.F)),u.ob(10,49152,null,0,a.wb,[u.h,u.k,u.x],null,null),(l()(),u.Ib(11,0,["",""])),(l()(),u.pb(12,0,null,null,60,"ion-content",[],null,null,null,o.R,o.k)),u.ob(13,49152,null,0,a.t,[u.h,u.k,u.x],null,null),(l()(),u.pb(14,0,null,0,11,"ion-item",[],null,null,null,o.W,o.p)),u.ob(15,49152,null,0,a.G,[u.h,u.k,u.x],null,null),(l()(),u.pb(16,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,o.X,o.q)),u.ob(17,49152,null,0,a.M,[u.h,u.k,u.x],{position:[0,"position"]},null),(l()(),u.Ib(-1,0,["Name"])),(l()(),u.pb(19,0,null,0,6,"ion-input",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var t=!0,i=l.component;return"ionBlur"===n&&(t=!1!==u.Bb(l,20)._handleBlurEvent(e.target)&&t),"ionChange"===n&&(t=!1!==u.Bb(l,20)._handleInputEvent(e.target)&&t),"ngModelChange"===n&&(t=!1!==(i.discount.name=e)&&t),t}),o.V,o.o)),u.ob(20,16384,null,0,a.Jb,[u.k],null,null),u.Fb(1024,null,s.d,(function(l){return[l]}),[a.Jb]),u.ob(22,671744,null,0,s.g,[[8,null],[8,null],[8,null],[6,s.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,s.e,null,[s.g]),u.ob(24,16384,null,0,s.f,[[4,s.e]],null,null),u.ob(25,49152,null,0,a.F,[u.h,u.k,u.x],null,null),(l()(),u.pb(26,0,null,0,13,"ion-item",[],null,null,null,o.W,o.p)),u.ob(27,49152,null,0,a.G,[u.h,u.k,u.x],null,null),(l()(),u.pb(28,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,o.X,o.q)),u.ob(29,49152,null,0,a.M,[u.h,u.k,u.x],{position:[0,"position"]},null),(l()(),u.Ib(-1,0,["Type"])),(l()(),u.pb(31,0,null,0,8,"ion-select",[["placeholder","Select a type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var t=!0,i=l.component;return"ionBlur"===n&&(t=!1!==u.Bb(l,32)._handleBlurEvent(e.target)&&t),"ionChange"===n&&(t=!1!==u.Bb(l,32)._handleChangeEvent(e.target)&&t),"ngModelChange"===n&&(t=!1!==(i.discount.type=e)&&t),t}),o.hb,o.z)),u.ob(32,16384,null,0,a.Ib,[u.k],null,null),u.Fb(1024,null,s.d,(function(l){return[l]}),[a.Ib]),u.ob(34,671744,null,0,s.g,[[8,null],[8,null],[8,null],[6,s.d]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,s.e,null,[s.g]),u.ob(36,16384,null,0,s.f,[[4,s.e]],null,null),u.ob(37,49152,null,0,a.jb,[u.h,u.k,u.x],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),(l()(),u.eb(16777216,null,0,1,null,p)),u.ob(39,278528,null,0,d.h,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.pb(40,0,null,0,11,"ion-item",[],null,null,null,o.W,o.p)),u.ob(41,49152,null,0,a.G,[u.h,u.k,u.x],null,null),(l()(),u.pb(42,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,o.X,o.q)),u.ob(43,49152,null,0,a.M,[u.h,u.k,u.x],{position:[0,"position"]},null),(l()(),u.Ib(-1,0,["Value"])),(l()(),u.pb(45,0,null,0,6,"ion-input",[["inputmode","decimal"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var t=!0,i=l.component;return"ionBlur"===n&&(t=!1!==u.Bb(l,46)._handleBlurEvent(e.target)&&t),"ionChange"===n&&(t=!1!==u.Bb(l,46)._handleInputEvent(e.target)&&t),"ngModelChange"===n&&(t=!1!==(i.discount.value=e)&&t),t}),o.V,o.o)),u.ob(46,16384,null,0,a.Jb,[u.k],null,null),u.Fb(1024,null,s.d,(function(l){return[l]}),[a.Jb]),u.ob(48,671744,null,0,s.g,[[8,null],[8,null],[8,null],[6,s.d]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,s.e,null,[s.g]),u.ob(50,16384,null,0,s.f,[[4,s.e]],null,null),u.ob(51,49152,null,0,a.F,[u.h,u.k,u.x],{disabled:[0,"disabled"],inputmode:[1,"inputmode"]},null),(l()(),u.pb(52,0,null,0,13,"ion-item",[],null,null,null,o.W,o.p)),u.ob(53,49152,null,0,a.G,[u.h,u.k,u.x],null,null),(l()(),u.pb(54,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,o.X,o.q)),u.ob(55,49152,null,0,a.M,[u.h,u.k,u.x],{position:[0,"position"]},null),(l()(),u.Ib(-1,0,["Status"])),(l()(),u.pb(57,0,null,0,8,"ion-select",[["placeholder","Select a status"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var t=!0,i=l.component;return"ionBlur"===n&&(t=!1!==u.Bb(l,58)._handleBlurEvent(e.target)&&t),"ionChange"===n&&(t=!1!==u.Bb(l,58)._handleChangeEvent(e.target)&&t),"ngModelChange"===n&&(t=!1!==(i.discount.status=e)&&t),t}),o.hb,o.z)),u.ob(58,16384,null,0,a.Ib,[u.k],null,null),u.Fb(1024,null,s.d,(function(l){return[l]}),[a.Ib]),u.ob(60,671744,null,0,s.g,[[8,null],[8,null],[8,null],[6,s.d]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,s.e,null,[s.g]),u.ob(62,16384,null,0,s.f,[[4,s.e]],null,null),u.ob(63,49152,null,0,a.jb,[u.h,u.k,u.x],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),(l()(),u.eb(16777216,null,0,1,null,f)),u.ob(65,278528,null,0,d.h,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.pb(66,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.save()&&u),u}),o.K,o.d)),u.ob(67,49152,null,0,a.j,[u.h,u.k,u.x],{expand:[0,"expand"]},null),(l()(),u.Ib(-1,0,["Save"])),(l()(),u.eb(16777216,null,0,1,null,v)),u.ob(70,16384,null,0,d.i,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.eb(16777216,null,0,1,null,C)),u.ob(72,16384,null,0,d.i,[u.M,u.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,7,0,"/discount"),l(n,8,0,"/discount"),l(n,17,0,"floating"),l(n,22,0,e.discount.name),l(n,29,0,"floating"),l(n,34,0,!e.isCreatingNewDiscount,e.discount.type),l(n,37,0,!e.isCreatingNewDiscount,"Select a type"),l(n,39,0,e.discountTypeList),l(n,43,0,"floating"),l(n,48,0,!e.isCreatingNewDiscount,e.discount.value),l(n,51,0,!e.isCreatingNewDiscount,"decimal"),l(n,55,0,"floating"),l(n,60,0,!e.isCreatingNewDiscount,e.discount.status),l(n,63,0,!e.isCreatingNewDiscount,"Select a status"),l(n,65,0,e.discountStatusList),l(n,67,0,"block"),l(n,70,0,!e.isCreatingNewDiscount),l(n,72,0,!e.isCreatingNewDiscount)}),(function(l,n){var e=n.component;l(n,11,0,(e.isCreatingNewDiscount?"Create New Discount":e.discount.name)||"Discount Detail"),l(n,19,0,u.Bb(n,24).ngClassUntouched,u.Bb(n,24).ngClassTouched,u.Bb(n,24).ngClassPristine,u.Bb(n,24).ngClassDirty,u.Bb(n,24).ngClassValid,u.Bb(n,24).ngClassInvalid,u.Bb(n,24).ngClassPending),l(n,31,0,u.Bb(n,36).ngClassUntouched,u.Bb(n,36).ngClassTouched,u.Bb(n,36).ngClassPristine,u.Bb(n,36).ngClassDirty,u.Bb(n,36).ngClassValid,u.Bb(n,36).ngClassInvalid,u.Bb(n,36).ngClassPending),l(n,45,0,u.Bb(n,50).ngClassUntouched,u.Bb(n,50).ngClassTouched,u.Bb(n,50).ngClassPristine,u.Bb(n,50).ngClassDirty,u.Bb(n,50).ngClassValid,u.Bb(n,50).ngClassInvalid,u.Bb(n,50).ngClassPending),l(n,57,0,u.Bb(n,62).ngClassUntouched,u.Bb(n,62).ngClassTouched,u.Bb(n,62).ngClassPristine,u.Bb(n,62).ngClassDirty,u.Bb(n,62).ngClassValid,u.Bb(n,62).ngClassInvalid,u.Bb(n,62).ngClassPending)}))}var k=u.lb("app-discount-detail",r,(function(l){return u.Kb(0,[(l()(),u.pb(0,0,null,null,1,"app-discount-detail",[],null,null,null,m,h)),u.ob(1,114688,null,0,r,[g.a,a.Db,a.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]);class B{}e.d(n,"DiscountDetailPageModuleNgFactory",(function(){return y}));var y=u.mb(t,[],(function(l){return u.yb([u.zb(512,u.j,u.X,[[8,[i.a,k]],[3,u.j],u.v]),u.zb(4608,d.k,d.j,[u.s,[2,d.r]]),u.zb(4608,s.i,s.i,[]),u.zb(4608,a.b,a.b,[u.x,u.g]),u.zb(4608,a.Cb,a.Cb,[a.b,u.j,u.p]),u.zb(4608,a.Gb,a.Gb,[a.b,u.j,u.p]),u.zb(1073742336,d.b,d.b,[]),u.zb(1073742336,s.h,s.h,[]),u.zb(1073742336,s.c,s.c,[]),u.zb(1073742336,a.Ab,a.Ab,[]),u.zb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),u.zb(1073742336,B,B,[]),u.zb(1073742336,t,t,[]),u.zb(1024,g.k,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);